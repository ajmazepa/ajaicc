(function(){var n,r;const e=this;n=function(t){if(t instanceof n)return t;if(!(this instanceof n))return new n(t);this.ajaiccwrapped=t};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports.ajaicc=n):e.ajaicc=n;const u=function(n){n=n.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)","i"),t=i.exec(window.location.href);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},o=function(n){typeof n=="undefined"&&(n=null);var r=new XMLHttpRequest,u="command=GetParam&t="+Date.now()+"&version=3.5&session_id="+encodeURIComponent(t);r.addEventListener("load",function(){for(var t,r=this.responseText.split("\r\n"),u={},i=0;i<r.length;i++)r[i].indexOf("=")>-1&&(t=r[i].split("="),t.length==1?u[t[0].toLowerCase()]="":t.length==2&&(u[t[0].toLowerCase()]=t[1]));n!=null&&n(u)});r.addEventListener("error",function(){console.error("AICC Get from LMS failed")});r.open("POST",i,!0);r.setRequestHeader("Content-type","application/x-www-form-urlencoded");r.send(u)},s=function(n,r,u,e,o,s,h){typeof n=="undefined"&&(n="");typeof r=="undefined"&&(r="N");typeof u=="undefined"&&(u=0);typeof e=="undefined"&&(e="");typeof o=="undefined"&&(o="I");typeof s=="undefined"&&(s=!1);typeof h=="undefined"&&(h=null);var c=new XMLHttpRequest,l="command=PutParam&t="+Date.now()+"&version=3.5&session_id="+encodeURIComponent(t)+"&aicc_data=[Core]\nLesson_Location="+n+"\nLesson_Status="+o+"\nScore="+u+"\nTime="+e;c.addEventListener("load",function(){for(var n,i=this.responseText.split("\r\n"),r={},t=0;t<i.length;t++)i[t].indexOf("=")>-1&&(n=i[t].split("="),n.length==1?r[n[0].toLowerCase()]="":n.length==2&&(r[n[0].toLowerCase()]=n[1]));h!=null&&h(r);s&&f()});c.addEventListener("error",function(){console.error("AICC Set from LMS failed")});c.open("POST",i,!0);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.send(l)},f=function(n){typeof n=="undefined"&&(n=null);var r=new XMLHttpRequest,u="command=ExitAU&t="+Date.now()+"&version=3.5&session_id="+encodeURIComponent(t)+"&aicc_data=";r.addEventListener("load",function(){for(var t,r=this.responseText.split("\r\n"),u={},i=0;i<r.length;i++)r[i].indexOf("=")>-1&&(t=r[i].split("="),t.length==1?u[t[0].toLowerCase()]="":t.length==2&&(u[t[0].toLowerCase()]=t[1]));n!=null&&n(u)});r.addEventListener("error",function(){console.error("AICC Exit from LMS failed")});r.open("POST",i,!0);r.setRequestHeader("Content-type","application/x-www-form-urlencoded");r.send(u)},t=u("aicc_sid"),i=u("aicc_url");r=!1;t!=null&&t!=""&&i!=null&&i!=""&&(r=!0);n.foundLMSParams=function(){return r};n.aiccGet=function(n){return o(n)};n.putAICC=function(n,t,i,r,u,f,e){return s(n,t,i,r,u,f,e)};n.exitAICC=function(n){return f(n)}}).call(this);
